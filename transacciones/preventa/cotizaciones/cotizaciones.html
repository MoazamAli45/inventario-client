<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Códigos Auxiliares</title>
    <link rel="stylesheet" href="/style/layout.css" />
    <link rel="stylesheet" href="/style/tabs.css" />
    <link rel="stylesheet" href="/style/modal.css" />
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
      .container-aux {
        max-width: 800px;
        margin: 0 auto;
        background-color: #fff;
        padding: 20px;
        border-radius: 20px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      }

      .section {
        margin-bottom: 20px;
      }

      .section-title {
        font-weight: bold;
        margin-bottom: 15px;
        color: #333;
        border-bottom: 1px solid #ddd;
        padding-bottom: 5px;
      }

      .form-row {
        display: flex;
        gap: 20px;
        margin-bottom: 15px;
        flex-wrap: wrap;
      }

      .form-group {
        flex: 1;
        min-width: 200px;
      }

      .form-group label {
        display: block;
        margin-bottom: 5px;
        font-size: 14px;
        color: #666;
      }
      input {
        height: 30px;
      }

      .form-group input,
      .form-group select {
        width: 100%;
        padding: 8px;
        border: 1px solid #ddd;
        border-radius: 4px;
        box-sizing: border-box;
      }

      .form-group input[type="date"] {
        padding: 6px 8px;
      }

      .full-width {
        width: 100%;
      }

      textarea {
        width: 100%;
        padding: 8px;
        border: 1px solid #ddd;
        border-radius: 4px;
        box-sizing: border-box;
        resize: vertical;
        min-height: 60px;
      }

      .buttons {
        margin-top: 20px;
        display: flex;
        justify-content: flex-end;
        padding: 10px;
        border-radius: 4px;
      }

      .btn {
        padding: 8px 16px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 5px;
        margin-left: 10px;
        font-size: 14px;
      }

      .btn-primary {
        background-color: #000000;
        color: white;
      }

      .btn-secondary {
        background-color: #ffffff;
        color: black;
        border: 1px solid rgb(0, 0, 0, 0.8);
        border-radius: 5px;
      }

      .icon {
        font-size: 14px;
        height: 16px;
        width: 16px;
      }
      .icon-black {
        color: black !important;
      }

      .input-with-button {
        display: flex;
        gap: 5px;
      }

      .input-with-button input {
        flex: 1;
      }

      .input-with-button button {
        background: none;
        border: 1px solid #ddd;
        border-radius: 4px;
        padding: 0 8px;
        cursor: pointer;
      }

      /*  2nd tab content */
      .doc-container * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        font-family: Arial, sans-serif;
      }

      .doc-container {
        padding: 20px;
        background-color: #f5f5f5;
      }

      .doc-card {
        background: white;
        border-radius: 8px;
        padding: 20px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      }

      .doc-header {
        margin-bottom: 20px;
      }

      .doc-header h2 {
        font-size: 1.2rem;
        margin-bottom: 15px;
      }

      .doc-form-row {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-bottom: 15px;
      }

      .doc-form-group {
        display: flex;
        flex-direction: column;
      }

      .doc-form-group label {
        font-size: 0.9rem;
        margin-bottom: 5px;
        color: #666;
      }

      .doc-form-group input {
        padding: 8px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 0.9rem;
      }

      .doc-tabs {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
        border-bottom: 1px solid #ddd;
      }

      .doc-tab {
        padding: 8px 16px;
        cursor: pointer;
        border: none;
        background: none;
        font-size: 0.9rem;
      }

      .doc-tab.doc-active {
        border-bottom: 2px solid #000;
        font-weight: bold;
      }

      .doc-detail-section {
        margin-bottom: 20px;
      }

      .doc-detail-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
      }

      .doc-detail-header h3 {
        font-size: 1.1rem;
      }

      .doc-action-buttons {
        display: flex;
        gap: 10px;
      }

      .doc-btn {
        padding: 8px 16px;
        border-radius: 4px;
        border: none;
        cursor: pointer;
      }

      .doc-btn-primary {
        background-color: #000;
        color: white;
      }

      .doc-btn-icon {
        padding: 8px;
        border-radius: 5px;
        border: 1px solid #ddd;
        background: white;
        cursor: pointer;
      }
      .icon {
        height: 16px;
        width: 16px;
      }

      .doc-table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 20px;
      }

      .doc-table th {
        text-align: left;
        padding: 10px;
        border-bottom: 2px solid #ddd;
        font-size: 0.9rem;
        color: #666;
      }

      .doc-footer {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 15px;
      }
    </style>
  </head>
  <body>
    <div class="layout">
      <header class="header">
        <nav class="nav">
          <button id="menuToggle" class="menu-toggle">
            <i data-lucide="menu"></i>
          </button>
          <div class="menu-items">
            <!-- Menu items will be dynamically inserted here -->
          </div>
        </nav>
      </header>

      <div class="toolbar">
        <!-- Toolbar icons will be dynamically inserted here -->
      </div>

      <div class="main-content">
        <aside class="sidebar">
          <div class="sidebar-toggle">
            <button id="sidebarToggle">
              <i data-lucide="chevron-left"></i>
            </button>
          </div>
          <nav class="sidebar-nav">
            <!-- Sidebar items will be dynamically inserted here -->
          </nav>
        </aside>
        <main class="content">
          <div class="container-aux">
            <h1>Registro de Cotización de Bienes y Servicios</h1>
            <div class="container">
              <!-- Tab Navigation -->
              <div class="tabs">
                <button class="tab-button active" data-tab="tab1">
                  Datos del Documento
                </button>
                <button class="tab-button" data-tab="tab2">
                  Detalle del Documento
                </button>
                <button class="tab-button" data-tab="tab3">
                  Datos Complementarios
                </button>
                <button class="tab-button" data-tab="tab4">Doc. Anexos</button>
                <button class="tab-button" data-tab="tab5">Lista</button>
              </div>

              <!-- Tab Content -->
              <div class="tab-content">
                <div id="tab1" class="tab-panel active">
                  <div class="container">
                    <div class="section">
                      <div class="section-title">Datos del documento</div>
                      <div class="form-row">
                        <div class="form-group">
                          <label>Doc</label>
                          <input type="text" value="CO" readonly />
                        </div>
                        <div class="form-group">
                          <label>Moneda</label>
                          <input
                            type="text"
                            value="Dolares Americanos"
                            readonly
                          />
                        </div>
                        <div class="form-group">
                          <label>Fch Emisión</label>
                          <input type="date" value="2022-11-31" />
                        </div>
                      </div>

                      <div class="form-row">
                        <div class="form-group">
                          <label>Serie</label>
                          <input type="text" value="001" />
                        </div>
                        <div class="form-group">
                          <label>T. Cambio</label>
                          <input type="text" value="3.8470" />
                        </div>
                        <div class="form-group">
                          <label>Fch Venc.</label>
                          <input type="date" value="2022-12-31" />
                        </div>
                      </div>

                      <div class="form-row">
                        <div class="form-group">
                          <label>Número</label>
                          <input type="text" value="000000030" />
                        </div>
                        <div class="form-group">
                          <label>Almacén</label>
                          <input type="text" value="001" />
                        </div>
                        <div class="form-group">
                          <label>Prioridad</label>
                          <input type="text" value="Baja" />
                        </div>
                      </div>

                      <div class="form-row">
                        <div class="form-group full-width">
                          <label>Glosa</label>
                          <textarea></textarea>
                        </div>
                      </div>

                      <div class="form-row">
                        <div class="form-group">
                          <label>Estado</label>
                          <input type="text" value="Pendiente" />
                        </div>
                      </div>
                    </div>

                    <div class="section">
                      <div class="section-title">Datos de Cliente</div>
                      <div class="form-row">
                        <div class="form-group">
                          <label>Cliente</label>
                          <div class="input-with-button">
                            <input type="text" value="10011472661" />
                            <button>...</button>
                          </div>
                        </div>
                        <div class="form-group">
                          <label>Nombre del Cliente</label>
                          <input type="text" value="ROJAS RUIZ EMILIO" />
                        </div>
                      </div>

                      <div class="form-row">
                        <div class="form-group full-width">
                          <label>Dirección</label>
                          <input
                            type="text"
                            value="JR CABO ALBERTO LEVEAU NRO. 340 CHACN SAN"
                          />
                        </div>
                      </div>

                      <div class="form-row">
                        <div class="form-group">
                          <label>Oper Facil</label>
                          <div class="input-with-button">
                            <input type="text" value="PVD" />
                            <button>...</button>
                          </div>
                        </div>
                        <div class="form-group">
                          <label>Descripción Oper Facil</label>
                          <input type="text" value="FACTURA DE VENTA DOLARES" />
                        </div>
                      </div>

                      <div class="form-row">
                        <div class="form-group">
                          <label>Vendedor</label>
                          <div class="input-with-button">
                            <input type="text" value="014" />
                            <button>...</button>
                          </div>
                        </div>
                        <div class="form-group">
                          <label>Nombre del Vendedor</label>
                          <input type="text" value="Jua Pita Pineda" />
                        </div>
                      </div>

                      <div class="form-row">
                        <div class="form-group">
                          <label>Condición</label>
                          <div class="input-with-button">
                            <input type="text" value="001" />
                            <button>...</button>
                          </div>
                        </div>
                        <div class="form-group">
                          <label>Descripción Condición</label>
                          <input type="text" value="CONTADO EFECTIVO" />
                        </div>
                      </div>

                      <div class="form-row">
                        <div class="form-group">
                          <label>Reg. Tribut.</label>
                          <input type="text" value="10011472661" />
                        </div>
                        <div class="form-group">
                          <label>Tipo Cond.</label>
                          <input type="text" value="Crédito" />
                        </div>
                      </div>
                    </div>

                    <div class="buttons">
                      <button class="btn btn-primary">
                        <i data-lucide="Save" class="icon"></i>
                        Guardar
                      </button>
                      <button class="btn btn-secondary">
                        <i data-lucide="printer" class="icon"></i>
                        Imprimir
                      </button>
                    </div>
                  </div>
                </div>

                <div id="tab2" class="tab-panel">
                  <!--  DOCUMENTO -->
                  <div class="doc-container">
                    <div class="doc-card">
                      <div class="doc-header">
                        <h2>Documento</h2>
                        <div class="doc-form-row">
                          <div class="doc-form-group">
                            <label>Cliente</label>
                            <input type="text" value="2010947" readonly />
                          </div>
                          <div class="doc-form-group">
                            <label>&nbsp;</label>
                            <input
                              type="text"
                              value="SERVICIOS GRAFIC"
                              readonly
                            />
                          </div>
                          <div class="doc-form-group">
                            <label>Documento</label>
                            <div style="display: flex; gap: 5px">
                              <input
                                type="text"
                                value="CO"
                                style="width: 60px"
                                readonly
                              />
                              <input
                                type="text"
                                value="001"
                                style="width: 60px"
                                readonly
                              />
                            </div>
                          </div>
                          <div class="doc-form-group">
                            <label>&nbsp;</label>
                            <input type="text" value="Extra" readonly />
                          </div>
                          <div class="doc-form-group">
                            <label>Moneda</label>
                            <div style="display: flex; gap: 5px">
                              <input
                                type="text"
                                value="02"
                                style="width: 60px"
                                readonly
                              />
                              <input
                                type="text"
                                value="Dólares Americanos"
                                readonly
                              />
                            </div>
                          </div>
                        </div>
                      </div>

                      <div class="doc-tabs">
                        <button class="doc-tab doc-active" data-tab="bienes">
                          Bienes
                        </button>
                        <button class="doc-tab" data-tab="servicios">
                          Servicios
                        </button>
                      </div>

                      <div class="doc-detail-section">
                        <div id="doc-bienes-section" class="doc-detail-header">
                          <h3>Detalle del Documento - Bienes</h3>
                          <div class="doc-action-buttons">
                            <button class="doc-btn-icon">
                              <i data-lucide="plus" class="icon"></i>
                            </button>
                            <button class="doc-btn-icon">
                              <i data-lucide="minus" class="icon"></i>
                            </button>
                            <button class="doc-btn-icon">
                              <i data-lucide="file-pen-line" class="icon"></i>
                            </button>
                            <button class="doc-btn-icon">
                              <i data-lucide="file" class="icon"></i>
                            </button>
                          </div>
                        </div>

                        <table class="doc-table">
                          <thead>
                            <tr>
                              <th>Alm</th>
                              <th>Artículo</th>
                              <th>Descripción</th>
                              <th>U. Med</th>
                              <th>Descripción</th>
                              <th>Vendedor</th>
                              <th>Acciones</th>
                            </tr>
                          </thead>
                        </table>

                        <button class="doc-btn doc-btn-primary">
                          Agregar Bien
                        </button>
                      </div>

                      <div class="doc-footer">
                        <div class="doc-form-group">
                          <label>Neto</label>
                          <input type="text" readonly />
                        </div>
                        <div class="doc-form-group">
                          <label>ISC</label>
                          <input type="text" readonly />
                        </div>
                        <div class="doc-form-group">
                          <label>Impuesto</label>
                          <input type="text" readonly />
                        </div>
                        <div class="doc-form-group">
                          <label>Total</label>
                          <input type="text" readonly />
                        </div>
                        <div class="doc-form-group">
                          <label>Percepción</label>
                          <input type="text" readonly />
                        </div>
                      </div>

                      <div class="doc-action-buttons" style="margin-top: 20px">
                        <button class="doc-btn-icon">
                          <i data-lucide="plus" class="icon"></i>
                        </button>
                        <button class="doc-btn-icon">
                          <i data-lucide="minus" class="icon"></i>
                        </button>

                        <button class="doc-btn-icon">
                          <i data-lucide="file" class="icon"></i>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>

                <div id="tab3" class="tab-panel"></div>
              </div>
            </div>
          </div>
        </main>
      </div>

      <footer class="footer">
        <div class="footer-content">
          <div class="footer-item">
            <i data-lucide="home"></i>
            <span>001 EMPRESA DEMO</span>
          </div>
          <div class="footer-item">
            <i data-lucide="user"></i>
            <span>ADM Administrador</span>
          </div>
          <div class="footer-item">
            <i data-lucide="calendar"></i>
            <span>10/12/24</span>
          </div>
          <div class="footer-item">
            <i data-lucide="settings"></i>
            <span>5</span>
          </div>
        </div>
      </footer>
    </div>
    <!-- Add this modal HTML right before the closing body tag -->
    <div id="selectionModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="modalTitle">Select Value</h3>
          <span class="close">&times;</span>
        </div>
        <div class="modal-body">
          <table class="selection-table">
            <thead>
              <tr>
                <th>Code</th>
                <th>Name</th>
              </tr>
            </thead>
            <tbody id="modalTableBody">
              <!-- Data will be dynamically inserted here -->
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Add this script before closing body tag -->
    <script>
      const modal = document.getElementById("selectionModal");
      const modalTitle = document.getElementById("modalTitle");
      const modalTableBody = document.getElementById("modalTableBody");
      const closeBtn = document.querySelector(".close");

      // Sample data for different selection types
      const selectionData = {
        vendor: [
          { code: "014", name: "Ag Pre Prensa" },
          { code: "015", name: "Ag Post Venta" },
        ],
        operFacil: [
          { code: "PVD", name: "FACTURA DE VENTA DOLARES" },
          { code: "PVS", name: "FACTURA DE VENTA SOLES" },
        ],
        condition: [
          { code: "001", name: "CONTADO EFECTIVO" },
          { code: "002", name: "CRÉDITO 30 DÍAS" },
        ],
      };

      // Function to open modal
      function openModal(type, inputElement, descriptionElement) {
        modalTitle.textContent = `Select ${type}`;
        modalTableBody.innerHTML = "";

        selectionData[type].forEach((item) => {
          const row = document.createElement("tr");
          row.innerHTML = `
      <td>${item.code}</td>
      <td>${item.name}</td>
    `;
          row.onclick = () => {
            inputElement.value = item.code;
            if (descriptionElement) {
              descriptionElement.value = item.name;
            }
            modal.style.display = "none";
          };
          modalTableBody.appendChild(row);
        });

        modal.style.display = "block";
      }

      // Close modal when clicking the close button or outside the modal
      closeBtn.onclick = () => (modal.style.display = "none");
      window.onclick = (event) => {
        if (event.target === modal) {
          modal.style.display = "none";
        }
      };

      // Add click handlers to all selection buttons
      document
        .querySelectorAll(".input-with-button button")
        .forEach((button) => {
          button.onclick = (e) => {
            const container = e.target.closest(".form-row");
            const inputElement = container.querySelector("input");
            const descriptionElement =
              container.nextElementSibling?.querySelector("input");

            // Determine which type of selection to show
            if (
              container.querySelector("label").textContent.includes("Vendedor")
            ) {
              openModal("vendor", inputElement, descriptionElement);
            } else if (
              container
                .querySelector("label")
                .textContent.includes("Oper Facil")
            ) {
              openModal("operFacil", inputElement, descriptionElement);
            } else if (
              container.querySelector("label").textContent.includes("Condición")
            ) {
              openModal("condition", inputElement, descriptionElement);
            }
          };
        });

      //   2nd Documento durther tabs
      const tabs = document.querySelectorAll(".doc-tab");
      const bienesSection = document.getElementById("doc-bienes-section");
      const serviciosSection = document.getElementById("doc-servicios-section");

      tabs.forEach((tab) => {
        tab.addEventListener("click", () => {
          tabs.forEach((t) => t.classList.remove("doc-active"));
          tab.classList.add("doc-active");

          const activeTab = tab.getAttribute("data-tab");
          if (activeTab === "bienes") {
            bienesSection.style.display = "flex";
            serviciosSection.style.display = "none";
          } else {
            bienesSection.style.display = "none";
            serviciosSection.style.display = "block";
          }
        });
      });
    </script>

    <script src="/js/layout.js"></script>
    <script src="/js/tabs.js"></script>
  </body>
</html>
